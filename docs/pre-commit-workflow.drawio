<mxfile host="65bd71144e" scale="1" border="20">
    <diagram name="Pre-Commit Execution Flow" id="execution-flow">
        <mxGraphModel dx="2158" dy="1560" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="2000" background="#000000" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="Pre-Commit Hook Execution Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontStyle=1;fontColor=#FFFFFF;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="350" y="40" width="700" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="subtitle" value="Ministry of Justice - DevSecOps Hooks | Secret Detection Workflow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#9AA0A6;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="400" y="95" width="600" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="start" value="Developer Commits Code" style="strokeWidth=3;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fillColor=#4285F4;strokeColor=#1967D2;fontColor=#FFFFFF;fontSize=16;fontStyle=1;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="550" y="160" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="git-add" value="git add &lt;files&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=15;fontFamily=Roboto Mono;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="550" y="270" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4285F4;strokeWidth=3;" parent="1" source="start" target="git-add" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="staged-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#4285F4;strokeWidth=3;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="480" y="370" width="440" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="staged-title" value="ðŸ“ Staged Files" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#4285F4;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="500" y="385" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="staged-content" value="â€¢ Modified files in staging area&lt;br&gt;â€¢ Excluded: Hidden files/directories (^\\..*|/\\..*)&lt;br&gt;â€¢ Ready for commit" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#E8EAED;fontFamily=Roboto;spacing=4;" parent="1" vertex="1">
                    <mxGeometry x="500" y="415" width="400" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4285F4;strokeWidth=3;" parent="1" source="git-add" target="staged-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="git-commit" value="git commit -m &quot;message&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=15;fontFamily=Roboto Mono;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="550" y="510" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4285F4;strokeWidth=3;" parent="1" source="staged-box" target="git-commit" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="hook-trigger" value="ðŸª Pre-Commit Hook Triggered" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#1E8E3E;strokeWidth=3;fontColor=#FFFFFF;fontSize=16;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="550" y="610" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="Automatic" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#FFFFFF;fontSize=12;fontFamily=Google Sans;" parent="1" source="git-commit" target="hook-trigger" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="config-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="480" y="720" width="440" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="config-title" value="âš™ï¸ .pre-commit-hooks.yaml" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#FFFFFF;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="500" y="735" width="300" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="config-content" value="â€¢ Hook ID: baseline&lt;br&gt;â€¢ Name: ðŸ” Ministry of Justice - Scanner&lt;br&gt;â€¢ Entry: ghcr.io/ministryofjustice/devsecops-hooks:v.1.3.0&lt;br&gt;â€¢ Language: docker_image&lt;br&gt;â€¢ fail_fast: true | always_run: true | verbose: true" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#9AA0A6;fontFamily=Roboto Mono;spacing=4;" parent="1" vertex="1">
                    <mxGeometry x="500" y="765" width="400" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="arrow5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;" parent="1" source="hook-trigger" target="config-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="docker-pull" value="ðŸ³ Docker Pull &amp; Execute Container" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#4285F4;strokeWidth=3;fontColor=#FFFFFF;fontSize=16;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="550" y="900" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="arrow6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#4285F4;strokeWidth=3;" parent="1" source="config-box" target="docker-pull" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="docker-container-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A1F;strokeColor=#34A853;strokeWidth=4;arcSize=3;" parent="1" vertex="1">
                    <mxGeometry x="200" y="1010" width="1000" height="650" as="geometry"/>
                </mxCell>
                <mxCell id="docker-title" value="ðŸ³ DOCKER CONTAINER EXECUTION" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#34A853;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="500" y="1030" width="400" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow7" value="Mount: /src â†’ $(pwd)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#FFFFFF;fontSize=12;fontFamily=Google Sans;" parent="1" source="docker-pull" target="docker-title" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="entrypoint" value="ENTRYPOINT: /app/scripts/scan.sh" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#34A853;strokeWidth=2;fontColor=#E8EAED;fontSize=14;fontFamily=Roboto Mono;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="520" y="1100" width="360" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="banner" value="âš¡ï¸ Ministry of Justice - Scanner v.1.3.0 âš¡ï¸" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#FBBC04;strokeWidth=2;fontColor=#FBBC04;fontSize=13;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="520" y="1180" width="360" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="arrow8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=2;" parent="1" source="entrypoint" target="banner" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="check-deps" value="âœ“ Check Dependencies&lt;br&gt;(gitleaks executable)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=13;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="520" y="1260" width="360" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="arrow9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#5F6368;strokeWidth=2;" parent="1" source="banner" target="check-deps" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="cd-src" value="ðŸ“‚ Change Directory: cd /src" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=13;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="520" y="1345" width="360" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="arrow10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#5F6368;strokeWidth=2;" parent="1" source="check-deps" target="cd-src" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="build-args" value="ðŸ”§ Build Arguments&lt;br&gt;â€¢ Config: ${GITLEAKS_CONFIGURATION_FILE}&lt;br&gt;â€¢ Ignore: ${GITLEAKS_IGNORE_FILE}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=12;fontFamily=Google Sans;align=left;spacingLeft=15;" parent="1" vertex="1">
                    <mxGeometry x="520" y="1425" width="360" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="arrow11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#5F6368;strokeWidth=2;" parent="1" source="cd-src" target="build-args" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="git-mode-decision" value="GIT_MODE == true?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FBBC04;strokeColor=#F29900;fontColor=#000000;fontSize=14;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="580" y="1525" width="240" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrow12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FBBC04;strokeWidth=3;" parent="1" source="build-args" target="git-mode-decision" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="git-mode-scan" value="ðŸ” GitLeaks Git Mode&lt;br&gt;gitleaks git --pre-commit&lt;br&gt;--redact --exit-code 1 --verbose" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#1E8E3E;strokeWidth=2;fontColor=#FFFFFF;fontSize=12;fontFamily=Roboto Mono;align=center;" parent="1" vertex="1">
                    <mxGeometry x="280" y="1540" width="240" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="arrow13" value="YES" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#FFFFFF;fontSize=13;fontFamily=Google Sans;fontStyle=1;" parent="1" source="git-mode-decision" target="git-mode-scan" edge="1">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="nonGit-mode-scan" value="ðŸ” GitLeaks Detect Mode&lt;br&gt;gitleaks detect --source .&lt;br&gt;--no-git --report-path&lt;br&gt;gitleaks-report.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EA4335;strokeColor=#C5221F;strokeWidth=2;fontColor=#FFFFFF;fontSize=12;fontFamily=Roboto Mono;align=center;" parent="1" vertex="1">
                    <mxGeometry x="880" y="1535" width="240" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow14" value="NO" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EA4335;strokeWidth=3;fontColor=#FFFFFF;fontSize=13;fontFamily=Google Sans;fontStyle=1;" parent="1" source="git-mode-decision" target="nonGit-mode-scan" edge="1">
                    <mxGeometry x="-0.2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="scan-result" value="Secrets&lt;br&gt;Detected?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FBBC04;strokeColor=#F29900;fontColor=#000000;fontSize=15;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="600" y="1725" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrow15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=2;" parent="1" source="git-mode-scan" target="scan-result" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="400" y="1700"/>
                            <mxPoint x="700" y="1700"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EA4335;strokeWidth=2;" parent="1" source="nonGit-mode-scan" target="scan-result" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1000" y="1700"/>
                            <mxPoint x="700" y="1700"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="failure" value="âŒ SCAN FAILED&lt;br&gt;Exit Code: 1&lt;br&gt;Secrets detected in code" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EA4335;strokeColor=#C5221F;strokeWidth=3;fontColor=#FFFFFF;fontSize=15;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="300" y="1870" width="280" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow17" value="YES" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EA4335;strokeWidth=3;fontColor=#FFFFFF;fontSize=13;fontFamily=Google Sans;fontStyle=1;" parent="1" source="scan-result" target="failure" edge="1">
                    <mxGeometry x="-0.5" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="success" value="âœ… SCAN PASSED&lt;br&gt;Exit Code: 0&lt;br&gt;No secrets detected" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#1E8E3E;strokeWidth=3;fontColor=#FFFFFF;fontSize=15;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="820" y="1870" width="280" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow18" value="NO" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=3;fontColor=#FFFFFF;fontSize=13;fontFamily=Google Sans;fontStyle=1;" parent="1" source="scan-result" target="success" edge="1">
                    <mxGeometry x="-0.5" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="exit-container" value="Exit Docker Container" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;fontColor=#E8EAED;fontSize=14;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="560" y="1990" width="280" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="arrow19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EA4335;strokeWidth=2;" parent="1" source="failure" target="exit-container" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="440" y="2015"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=2;" parent="1" source="success" target="exit-container" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="960" y="2015"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="commit-decision" value="Commit&lt;br&gt;Allowed?" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FBBC04;strokeColor=#F29900;fontColor=#000000;fontSize=15;fontFamily=Google Sans;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="600" y="2080" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="arrow21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#5F6368;strokeWidth=3;" parent="1" source="exit-container" target="commit-decision" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="commit-blocked" value="ðŸš« COMMIT BLOCKED&lt;br&gt;Fix secrets and retry" style="strokeWidth=3;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fillColor=#EA4335;strokeColor=#C5221F;fontColor=#FFFFFF;fontSize=16;fontStyle=1;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="300" y="2230" width="280" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow22" value="FAILED" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EA4335;strokeWidth=4;fontColor=#FFFFFF;fontSize=14;fontFamily=Google Sans;fontStyle=1;" parent="1" source="commit-decision" target="commit-blocked" edge="1">
                    <mxGeometry x="-0.5" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="commit-success" value="âœ… COMMIT SUCCESSFUL&lt;br&gt;Code is secure!" style="strokeWidth=3;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fillColor=#34A853;strokeColor=#1E8E3E;fontColor=#FFFFFF;fontSize=16;fontStyle=1;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="820" y="2230" width="280" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="arrow23" value="PASSED" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#34A853;strokeWidth=4;fontColor=#FFFFFF;fontSize=14;fontFamily=Google Sans;fontStyle=1;" parent="1" source="commit-decision" target="commit-success" edge="1">
                    <mxGeometry x="-0.5" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="legend-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="100" y="2380" width="600" height="230" as="geometry"/>
                </mxCell>
                <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#FFFFFF;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2395" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4285F4;strokeColor=#1967D2;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2440" width="35" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend1-text" value="User Actions / Docker Operations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#E8EAED;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="165" y="2437" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#34A853;strokeColor=#1E8E3E;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2480" width="35" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend2-text" value="Success / Scanning Execution" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#E8EAED;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="165" y="2477" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EA4335;strokeColor=#C5221F;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2520" width="35" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend3-text" value="Failure / Blocked Actions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#E8EAED;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="165" y="2517" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend4" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;fillColor=#FBBC04;strokeColor=#F29900;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2560" width="35" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend4-text" value="Decision Points" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#E8EAED;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="165" y="2557" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="445" y="2440" width="35" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="legend5-text" value="Configuration / Processing" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#E8EAED;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="490" y="2437" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="info-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2D2D2D;strokeColor=#5F6368;strokeWidth=2;arcSize=5;" parent="1" vertex="1">
                    <mxGeometry x="750" y="2380" width="550" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="info-title" value="ðŸ“‹ Key Information" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#FFFFFF;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="770" y="2395" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="info-text" value="â€¢ Hook runs automatically on git commit&lt;br&gt;â€¢ Docker image: ghcr.io/ministryofjustice/devsecops-hooks:v.1.3.0&lt;br&gt;â€¢ Scans staged files (excludes hidden files)&lt;br&gt;â€¢ GitLeaks v8.30.0 for secret detection&lt;br&gt;â€¢ fail_fast=true: Stops immediately on failure&lt;br&gt;â€¢ Exit code 0=success, 1=failure&lt;br&gt;â€¢ Supports custom config and ignore files" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#9AA0A6;fontFamily=Roboto;spacing=4;" parent="1" vertex="1">
                    <mxGeometry x="770" y="2430" width="510" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="footer" value="Â© 2025 Ministry of Justice UK | Pre-Commit Hook Execution Flow v.1.3.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#5F6368;fontFamily=Google Sans;" parent="1" vertex="1">
                    <mxGeometry x="445" y="2660" width="500" height="20" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>